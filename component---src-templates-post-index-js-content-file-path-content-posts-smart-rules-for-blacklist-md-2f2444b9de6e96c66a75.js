"use strict";(self.webpackChunkviolentmonkey_github_io=self.webpackChunkviolentmonkey_github_io||[]).push([[470],{1307:function(e,t,n){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function a(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:String(t)}n.d(t,{RP:function(){return i}});var r=n(9474);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){var l,r,c;l=e,r=t,c=n[t],(r=a(r))in l?Object.defineProperty(l,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[r]=c})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const o=r.createContext({});function i(e){const t=r.useContext(o);return r.useMemo((()=>"function"==typeof e?e(t):s(s({},t),e)),[t,e])}},6578:function(e,t,n){n.r(t),n.d(t,{Head:function(){return i.p},default:function(){return u}});var l=n(1307),a=n(9474);function r(e){const t=Object.assign({p:"p",h3:"h3",a:"a",span:"span",ul:"ul",li:"li",code:"code",pre:"pre"},(0,l.RP)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.p,null,"Userscripts are injected into web pages according to predefined rules. However, the rules do not always satisfy users for different reasons. In such cases, we need blacklist to exclude some web pages for all scripts."),"\n",a.createElement(t.h3,{id:"blacklist-use-cases",style:{position:"relative"}},a.createElement(t.a,{href:"#blacklist-use-cases","aria-label":"blacklist use cases permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Blacklist use cases"),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"hostnames"),"\n",a.createElement(t.p,null,"In most cases, we may want to add simply hostnames to exclude."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.code,null,"@exclude-match")," rules"),"\n",a.createElement(t.p,null,"Since match patterns are safer to match URLs, we prefer to use ",a.createElement(t.code,null,"@exclude-match")," rules to exclude URLs more flexibly."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.code,null,"@exclude")," rules"),"\n",a.createElement(t.p,null,"They are commonly supported by userscripts, so we should just keep them work."),"\n"),"\n"),"\n",a.createElement(t.h3,{id:"blacklist-patterns",style:{position:"relative"}},a.createElement(t.a,{href:"#blacklist-patterns","aria-label":"blacklist patterns permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Blacklist patterns"),"\n",a.createElement(t.p,null,"Taken all use cases into account, the blacklist may have following patterns:"),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"hostnames"),"\n",a.createElement(t.p,null,"A string without slashes, e.g. ",a.createElement(t.code,null,"example.com"),", ",a.createElement(t.code,null,"*.example.com"),"."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://developer.chrome.com/extensions/match_patterns",target:"_blank",rel:"nofollow noopener noreferrer"},"match patterns")),"\n",a.createElement(t.p,null,"A string with scheme, hostname and pathname patterns, e.g. ",a.createElement(t.code,null,"*://*/*"),", ",a.createElement(t.code,null,"https://www.google.com/"),"."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://wiki.greasespot.net/Include_and_exclude_rules",target:"_blank",rel:"nofollow noopener noreferrer"},a.createElement(t.code,null,"@exclude")," rules")),"\n",a.createElement(t.p,null,"A string prefixed with ",a.createElement(t.code,null,"@exclude "),", e.g. ",a.createElement(t.code,null,"@exclude https://*"),"."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"comments"),"\n",a.createElement(t.p,null,"A string starting with ",a.createElement(t.code,null,"#"),", will be ignored."),"\n"),"\n"),"\n",a.createElement(t.p,null,"Here is a full example for blacklist:"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"code-highlight"},a.createElement(t.span,{className:"code-line"},"# hostnames\n"),a.createElement(t.span,{className:"code-line"},"www.google.com\n"),a.createElement(t.span,{className:"code-line"},"\n"),a.createElement(t.span,{className:"code-line"},"# @exclude-match rules\n"),a.createElement(t.span,{className:"code-line"},"*://twitter.com/*\n"),a.createElement(t.span,{className:"code-line"},"\n"),a.createElement(t.span,{className:"code-line"},"# @exclude rules\n"),a.createElement(t.span,{className:"code-line"},"@exclude https://example.com/*\n"))),"\n",a.createElement(t.h3,{id:"whitelist-patterns",style:{position:"relative"}},a.createElement(t.a,{href:"#whitelist-patterns","aria-label":"whitelist patterns permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Whitelist patterns"),"\n",a.createElement(t.p,null,"For some people who want to disable Violentmonkey for most websites, a whitelist is needed."),"\n",a.createElement(t.p,null,"To work as a whitelist, we can use following patterns:"),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://developer.chrome.com/extensions/match_patterns",target:"_blank",rel:"nofollow noopener noreferrer"},a.createElement(t.code,null,"@match")," rules")),"\n",a.createElement(t.p,null,"A string prefixed with ",a.createElement(t.code,null,"@match "),", and followed by a match pattern, e.g. ",a.createElement(t.code,null,"@match https://www.google.com/*"),"."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://wiki.greasespot.net/Include_and_exclude_rules",target:"_blank",rel:"nofollow noopener noreferrer"},a.createElement(t.code,null,"@include")," rules")),"\n",a.createElement(t.p,null,"A string prefixed with ",a.createElement(t.code,null,"@include "),", e.g. ",a.createElement(t.code,null,"@include https://*"),"."),"\n"),"\n"),"\n",a.createElement(t.p,null,"If any of the rules above are matched, the URL bypasses the blacklist.\nTo make it a whitelist, we should block all other URLs by a rule at the end: ",a.createElement(t.code,null,"*"),"."),"\n",a.createElement(t.p,null,"Here is a full example for whitelist:"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"code-highlight"},a.createElement(t.span,{className:"code-line"},"# match rules\n"),a.createElement(t.span,{className:"code-line"},"@match https://www.google.com/*\n"),a.createElement(t.span,{className:"code-line"},"\n"),a.createElement(t.span,{className:"code-line"},"# include rules\n"),a.createElement(t.span,{className:"code-line"},"@include https://example.com/*\n"),a.createElement(t.span,{className:"code-line"},"\n"),a.createElement(t.span,{className:"code-line"},"# block everything else\n"),a.createElement(t.span,{className:"code-line"},"*\n"))))}var c=function(e={}){const{wrapper:t}=Object.assign({},(0,l.RP)(),e.components);return t?a.createElement(t,e,a.createElement(r,e)):r(e)},s=n(2349),o=n(301),i=n(9144);function m({location:e,data:t,children:n}){const{mdx:l}=t,r=(0,a.useRef)(),{pathname:c}=e,i="/"===c;return a.createElement(o.A,{location:e,sidebar:l.frontmatter.sidebar},a.createElement("main",{className:"flex-1 has-toc"},!i&&a.createElement("section",{className:"mb-10 pt-1"},a.createElement("h1",null,l.frontmatter.title)),a.createElement("section",{className:"items-start with-toc"},!i&&a.createElement(s.A,{data:l.tableOfContents,articleRef:r}),a.createElement("article",{className:"flex-1 min-w-0 mr-4",ref:r},n)),a.createElement("section",null,a.createElement("hr"),l.fields.slug.startsWith("posts/")&&a.createElement("div",{className:"mb-6"},a.createElement("em",null,"Published at ",l.frontmatter.date)))))}function u(e){return a.createElement(m,e,a.createElement(c,e))}},8931:function(e,t,n){n.d(t,{A:function(){return r}});let l=!1;try{const e=Object.defineProperty({},"passive",{get(){l=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(c){}const a=!!l&&{passive:!0};function r(e){return window.addEventListener("scroll",e,a),()=>window.removeEventListener("scroll",e,a)}},9144:function(e,t,n){n.d(t,{p:function(){return c}});var l=n(9474),a=n(8136),r=n(1713);function c(){const{site:{siteMetadata:{title:e,subtitle:t}}}=(0,a.useStaticQuery)("3202921338");return l.createElement(l.Fragment,null,l.createElement("title",null,e),l.createElement("meta",{name:"description",content:t}),l.createElement("meta",{name:"google-site-verification",content:"OKMYmcVuMfm9H_UjfNXPzRb2c0QoBtmZ7v1KwHNXnRQ"}),l.createElement("link",{rel:"shortcut icon",type:"image/png",href:r.A}))}},301:function(e,t,n){n.d(t,{A:function(){return y}});var l=n(8595),a=n(9474),r=(n(3763),n(993),n(1622),n(5376),n(8136));const c=(s=function(e){const{allMdx:{nodes:t}}=(0,r.useStaticQuery)("1116475411"),n=(0,a.useMemo)((()=>(null==e?void 0:e.match)&&(null==t?void 0:t.filter((t=>{var n;return(null===(n=t.frontmatter.sidebar)||void 0===n?void 0:n.match)===e.match})).sort(((e,t)=>e.frontmatter.sidebar.order-t.frontmatter.sidebar.order)))),[e,t]),[l,c]=(0,a.useState)(!1);return{matchedNodes:n,show:l,setShow:c,toggle:()=>{c(!l)}}},o=a.createContext(null),{Provider:function(e){var t=s(e.initialState);return a.createElement(o.Provider,{value:t},e.children)},useContainer:function(){var e=a.useContext(o);if(null===e)throw new Error("Component must be wrapped with <Container.Provider>");return e}});var s,o,i=n(4432),m=(n(6851),n(2445),n(8931));function u(){const e=(0,a.useRef)();return(0,a.useEffect)((()=>(0,m.A)((()=>{const t=document.documentElement,n=(document.body.scrollTop||t.scrollTop)/(t.scrollHeight-t.clientHeight),l=Math.min(1,n);e.current.style.transform=`scaleX(${l})`})))),a.createElement("div",{className:"w-full h-px"},a.createElement("div",{className:"w-full h-full origin-left bg-yellow-500 scale-x-0",ref:e}))}function d(){const[e,t]=(0,a.useState)(null);return e?a.createElement("div",{className:"bg-orange-200 px-4 text-sm flex","data-ga-category":"banner"},a.createElement("div",{className:"flex-1",dangerouslySetInnerHTML:{__html:e}}),a.createElement("div",{onClick:()=>{t(null)},className:"cursor-pointer text-gray-600","data-ga-label":"hide"},"✗")):null}function p(e){const{matchedNodes:t,toggle:n}=c.useContainer(),{data:l}=e,s=l.allMdx.nodes.reduce(((e,t)=>(t.frontmatter.redirect_from.forEach((n=>{e[n]=`/${t.fields.slug}`})),e)),{});return a.createElement("header",{className:"sticky top-0 left-0 right-0 bg-white z-10"},a.createElement("nav",null,a.createElement(r.Link,{to:"/",className:"nav-icon sm:hidden"},a.createElement("svg",{viewBox:"0 0 24 24"},a.createElement("path",{d:"M12 0l-12 12h4v12h5v-8h6v8h5v-12h4z"}))),t&&a.createElement("a",{className:"nav-icon lg:hidden",onClick:e=>{e.stopPropagation(),n()}},a.createElement("svg",{viewBox:"0 0 24 24"},a.createElement("path",{d:"M0 2h24v4h-24zM0 10h24v4h-24zM0 18h24v4h-24z"}))),a.createElement(r.Link,{to:"/",className:"brand hidden sm:block"},"Violentmonkey"),a.createElement("span",{className:"flex-1"}),a.createElement("div",{className:"overflow-auto min-w-0 flex whitespace-no-wrap"},l.site.siteMetadata.menu.map((e=>a.createElement(r.Link,{className:"nav-item",key:e.path,to:s[e.path]||e.path,activeClassName:"active",partiallyActive:!0},e.label))))),a.createElement(u,null))}var h=e=>a.createElement(r.StaticQuery,{query:"1700780748",render:t=>a.createElement(a.Fragment,null,a.createElement(d,null),a.createElement(p,(0,i.A)({},e,{data:t})))});function f(e){const{data:{site:{siteMetadata:{copyright:t,footer:n}}}}=e;return a.createElement("footer",{className:"flex mt-10 p-6 pb-16 border-t border-gray-400 lg:pb-6"},a.createElement("div",null,"Violentmonkey ",t),n.map((e=>a.createElement(r.Link,{className:"mx-2",key:e.path,to:e.path},e.label))))}var E=e=>a.createElement(r.StaticQuery,{query:"2344890832",render:t=>a.createElement(f,(0,i.A)({},e,{data:t}))});function v(){const{matchedNodes:e,setShow:t}=c.useContainer();return(0,a.useEffect)((()=>{if(e){const e=()=>{t(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}}),[e,t]),e?a.createElement("aside",{className:"sidebar"},a.createElement("ul",null,e.map(((e,t)=>a.createElement("li",{key:t},a.createElement(r.Link,{to:`/${e.fields.slug}`,activeClassName:"active"},e.frontmatter.title)))))):null}function b(){const[e,t]=(0,a.useState)(!1);return e?a.createElement("div",{className:"fixed bottom-0 right-0 w-full h-full flex flex-col items-end z-10 max-w-[320px] max-h-[450px]"},a.createElement("div",{className:"p-2 cursor-pointer",onClick:()=>t(!1)},a.createElement("svg",{viewBox:"0 0 12 12",className:"w-4 h-4"},a.createElement("path",{d:"M0 1L11 12L12 11L1 0zM11 0L0 11L1 12L12 1z",stroke:"none",fill:"currentColor"}))),a.createElement("iframe",{className:"flex-1 w-full",src:"https://discord.com/widget?id=995346102003965952&theme=dark",sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"})):a.createElement("a",{className:"fixed bottom-0 right-8 px-8 py-2 bg-blue-500 hover:bg-blue-600 text-white hover:text-white rounded-t-lg uppercase cursor-pointer",onClick:()=>t(!0)},"Open Chat")}const g=["sidebar"];function w(e){const{location:{pathname:t},children:n}=e,{show:l}=c.useContainer();return"/offline-plugin-app-shell-fallback/"===t?null:a.createElement(a.Fragment,null,a.createElement(h,null),a.createElement("div",{className:"relative flex z-0 "+(l?"sidebar-open":"")},a.createElement(v,null),n),a.createElement(E,null),a.createElement(b,null))}var y=e=>{let{sidebar:t}=e,n=(0,l.A)(e,g);return a.createElement(c.Provider,{initialState:t},a.createElement(w,n))}},2349:function(e,t,n){n.d(t,{A:function(){return s}});n(116),n(2445);var l=n(9474),a=n(8136),r=n(8931);function c({items:e}){return l.createElement("ul",null,e.map(((e,t)=>{const n=e.url.indexOf("#"),r=n<0?"#":e.url.slice(n);return l.createElement("li",{key:t},l.createElement(a.Link,{to:r},e.title),e.items&&l.createElement(c,{items:e.items}))})))}function s(e){const{className:t,data:n,articleRef:a}=e,s=(0,l.useRef)(),o=(0,l.useRef)();return(0,l.useEffect)((()=>{if(!n)return;const e=Array.from(s.current.querySelectorAll("a"));e.forEach((e=>{const t=decodeURIComponent(e.href.split("#")[1]||"");if(e.dataset.id=t,a.current){const n=a.current.querySelector(`#${CSS.escape(t)}`);n&&(e.textContent=n.textContent.trim())}}));return(0,r.A)((()=>{if(!a.current||!s.current)return;const{scrollTop:t}=document.body,n=e.map((e=>{const{id:n}=e.dataset,l=a.current.querySelector(`#${CSS.escape(n)}`);return l&&{id:n,a:e,offset:l.getBoundingClientRect().top-t-70}})).filter(Boolean),{a:l}=n.find(((e,t)=>{const l=n[t+1];return l&&l.offset>0}))||{};o.current&&(o.current.className=""),l&&(l.className="active"),o.current=l}))})),l.createElement("section",{className:`toc ${t||""}`,ref:s},(null==n?void 0:n.items)&&l.createElement(l.Fragment,null,l.createElement("h2",null,"Table of Contents"),l.createElement(c,{items:n.items})))}},1713:function(e,t,n){t.A=n.p+"static/vm-6437e4e5a400c6eff1c23ead4d549b0a.png"}}]);
//# sourceMappingURL=component---src-templates-post-index-js-content-file-path-content-posts-smart-rules-for-blacklist-md-2f2444b9de6e96c66a75.js.map