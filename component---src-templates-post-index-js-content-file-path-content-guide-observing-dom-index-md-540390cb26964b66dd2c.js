"use strict";(self.webpackChunkviolentmonkey_github_io=self.webpackChunkviolentmonkey_github_io||[]).push([[909],{1307:function(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:String(t)}n.d(t,{RP:function(){return m}});var l=n(9474);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){var a,l,c;a=e,l=t,c=n[t],(l=r(l))in a?Object.defineProperty(a,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[l]=c})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const o=l.createContext({});function m(e){const t=l.useContext(o);return l.useMemo((()=>"function"==typeof e?e(t):s(s({},t),e)),[t,e])}},7028:function(e,t,n){n.r(t),n.d(t,{Head:function(){return i.p},default:function(){return p}});var a=n(1307),r=n(9474),l=n(4293);function c(e){const t=Object.assign({h2:"h2",a:"a",span:"span",p:"p",code:"code",pre:"pre"},(0,a.RP)(),e.components);return r.createElement(r.Fragment,null,r.createElement(t.h2,{id:"background",style:{position:"relative"}},r.createElement(t.a,{href:"#background","aria-label":"background permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Background"),"\n",r.createElement(t.p,null,"It is a common case to operate on elements that are created dynamically, which may not be ready even on ",r.createElement(t.code,null,"document-end"),"."),"\n",r.createElement(t.p,null,"In earlier userscripts we can see authors using timers to detect DOM elements periodically, which works in most browsers but is less effective, and there is likely obvious lag after the elements appear and before the operations are performed."),"\n",r.createElement(t.p,null,"A better way to do stuff when certain element is ready is to use ",r.createElement(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver",target:"_blank",rel:"nofollow noopener noreferrer"},"MutationObserver")," instead of timers. ",r.createElement(t.code,null,"MutationObserver")," is well supported in modern browsers, including those Violentmonkey works on, as defined ",r.createElement(t.a,{href:"https://github.com/violentmonkey/violentmonkey/blob/master/.browserslistrc",target:"_blank",rel:"nofollow noopener noreferrer"},"here"),"."),"\n",r.createElement(t.p,null,"You can stop reading this now if you are familiar with ",r.createElement(t.code,null,"MutationObserver")," and prefer native APIs."),"\n",r.createElement(t.h2,{id:"introducing-violentmonkeydom",style:{position:"relative"}},r.createElement(t.a,{href:"#introducing-violentmonkeydom","aria-label":"introducing violentmonkeydom permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Introducing @violentmonkey/dom"),"\n",r.createElement(t.p,null,"If you are looking for an easy and friendly way to observe elements, ",r.createElement(t.a,{href:"https://github.com/violentmonkey/vm-dom",target:"_blank",rel:"nofollow noopener noreferrer"},"@violentmonkey/dom")," might be what you want."),"\n",r.createElement(l.w,null,r.createElement(t.p,null,r.createElement(t.a,{href:"https://github.com/violentmonkey/vm-dom",target:"_blank",rel:"nofollow noopener noreferrer"},"@violentmonkey/dom")," is a library provided by the Violentmonkey team. Nevertheless, it is just pure JavaScript and can be used with other script managers.")),"\n",r.createElement(t.p,null,"Once the library is required, we can use its methods under the ",r.createElement(t.code,null,"VM")," namespace. See ",r.createElement(t.a,{href:"https://www.jsdocs.io/package/@violentmonkey/dom",target:"_blank",rel:"nofollow noopener noreferrer"},"the documentation")," for more details."),"\n",r.createElement(t.h2,{id:"requirements",style:{position:"relative"}},r.createElement(t.a,{href:"#requirements","aria-label":"requirements permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Requirements"),"\n",r.createElement(t.p,null,"Add ",r.createElement(t.code,null,"@violentmonkey/dom")," to the ",r.createElement(t.a,{href:"/api/metadata-block/"},"meta block")," of your script:"),"\n",r.createElement(t.pre,{className:"language-js"},r.createElement(t.code,{className:"language-js code-highlight"},r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// ==UserScript=="),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// ..."),"\n"),r.createElement(t.span,{className:"code-line highlight-line"},r.createElement(t.span,{className:"token comment"},"// @require https://cdn.jsdelivr.net/npm/@violentmonkey/dom@2"),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// ==/UserScript=="),"\n"))),"\n",r.createElement(t.p,null,"If the project is initiated from ",r.createElement(t.a,{href:"https://github.com/violentmonkey/generator-userscript",target:"_blank",rel:"nofollow noopener noreferrer"},"our generator"),", it's likely that the dependency is already included."),"\n",r.createElement(t.h2,{id:"observing",style:{position:"relative"}},r.createElement(t.a,{href:"#observing","aria-label":"observing permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Observing"),"\n",r.createElement(t.p,null,"After preparing the requirements, we can observe elements by ",r.createElement(t.code,null,"VM.observe")," (",r.createElement(t.a,{href:"https://www.jsdocs.io/package/@violentmonkey/dom#observe",target:"_blank",rel:"nofollow noopener noreferrer"},"doc"),"), which utilizes ",r.createElement(t.code,null,"MutationObserver")," under the hood."),"\n",r.createElement(t.p,null,"For example, prepend ",r.createElement(t.code,null,"<h1>Profile</h1>")," to the dynamically created ",r.createElement(t.code,null,'<div class="profile">'),":"),"\n",r.createElement(t.pre,{className:"language-js"},r.createElement(t.code,{className:"language-js code-highlight"},r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token keyword"},"const")," disconnect ",r.createElement(t.span,{className:"token operator"},"=")," ",r.createElement(t.span,{className:"token constant"},"VM"),r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token method function property-access"},"observe"),r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token dom variable"},"document"),r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token property-access"},"body"),r.createElement(t.span,{className:"token punctuation"},",")," ",r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token punctuation"},")")," ",r.createElement(t.span,{className:"token arrow operator"},"=>")," ",r.createElement(t.span,{className:"token punctuation"},"{"),"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token comment"},"// Find the target node"),"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token keyword"},"const")," node ",r.createElement(t.span,{className:"token operator"},"=")," ",r.createElement(t.span,{className:"token dom variable"},"document"),r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token method function property-access"},"querySelector"),r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token string"},"'.profile'"),r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token keyword control-flow"},"if")," ",r.createElement(t.span,{className:"token punctuation"},"("),"node",r.createElement(t.span,{className:"token punctuation"},")")," ",r.createElement(t.span,{className:"token punctuation"},"{"),"\n"),r.createElement(t.span,{className:"code-line"},"    ",r.createElement(t.span,{className:"token keyword"},"const")," h1 ",r.createElement(t.span,{className:"token operator"},"=")," ",r.createElement(t.span,{className:"token dom variable"},"document"),r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token method function property-access"},"createElement"),r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token string"},"'h1'"),r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"    h1",r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token property-access"},"textContent")," ",r.createElement(t.span,{className:"token operator"},"=")," ",r.createElement(t.span,{className:"token string"},"'Profile'"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"    node",r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token method function property-access"},"prepend"),r.createElement(t.span,{className:"token punctuation"},"("),"h1",r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"\n"),r.createElement(t.span,{className:"code-line"},"    ",r.createElement(t.span,{className:"token comment"},"// disconnect observer"),"\n"),r.createElement(t.span,{className:"code-line"},"    ",r.createElement(t.span,{className:"token keyword control-flow"},"return")," ",r.createElement(t.span,{className:"token boolean"},"true"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token punctuation"},"}"),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token punctuation"},"}"),r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// You can also disconnect the observer explicitly when it's not used any more"),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token function"},"disconnect"),r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"))),"\n",r.createElement(t.p,null,"Note that ",r.createElement(t.code,null,"return true")," in the end is needed to disconnect the observer once we find the target node. Otherwise the detection continues and makes useless callbacks."),"\n",r.createElement(t.p,null,"To observe ",r.createElement(t.code,null,"document.body")," we must make sure ",r.createElement(t.code,null,"document.body")," exists. This should not be a problem if ",r.createElement(t.code,null,"@run-at")," is omitted or set to a value other than ",r.createElement(t.code,null,"document-start"),"."),"\n",r.createElement(t.h2,{id:"optionally-using-jquery",style:{position:"relative"}},r.createElement(t.a,{href:"#optionally-using-jquery","aria-label":"optionally using jquery permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"(Optionally) Using jQuery"),"\n",r.createElement(t.p,null,"This is not recommended though, we put it here just in case some people are big fans of jQuery."),"\n",r.createElement(t.p,null,"It is quite simple to integrate jQuery with the observer. Before we begin we must include jQuery as a dependency:"),"\n",r.createElement(t.pre,{className:"language-js"},r.createElement(t.code,{className:"language-js code-highlight"},r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// ==UserScript=="),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// ..."),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// @require https://cdn.jsdelivr.net/npm/@violentmonkey/dom@1"),"\n"),r.createElement(t.span,{className:"code-line highlight-line"},r.createElement(t.span,{className:"token comment"},"// @require https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token comment"},"// ==/UserScript=="),"\n"))),"\n",r.createElement(t.p,null,"Then we can wrap the node with jQuery and operate it the jQuery way:"),"\n",r.createElement(t.pre,{className:"language-js"},r.createElement(t.code,{className:"language-js code-highlight"},r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token constant"},"VM"),r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token method function property-access"},"observe"),r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token dom variable"},"document"),r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token property-access"},"body"),r.createElement(t.span,{className:"token punctuation"},",")," ",r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token punctuation"},")")," ",r.createElement(t.span,{className:"token arrow operator"},"=>")," ",r.createElement(t.span,{className:"token punctuation"},"{"),"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token comment"},"// Find the target node"),"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token keyword"},"const")," $node ",r.createElement(t.span,{className:"token operator"},"=")," ",r.createElement(t.span,{className:"token function"},"$"),r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token string"},"'.profile'"),r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token keyword control-flow"},"if")," ",r.createElement(t.span,{className:"token punctuation"},"("),"$node",r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token property-access"},"length"),r.createElement(t.span,{className:"token punctuation"},")")," ",r.createElement(t.span,{className:"token punctuation"},"{"),"\n"),r.createElement(t.span,{className:"code-line"},"    $node",r.createElement(t.span,{className:"token punctuation"},"."),r.createElement(t.span,{className:"token method function property-access"},"prepend"),r.createElement(t.span,{className:"token punctuation"},"("),r.createElement(t.span,{className:"token string"},"'<h1>Profile</h1>'"),r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"\n"),r.createElement(t.span,{className:"code-line"},"    ",r.createElement(t.span,{className:"token comment"},"// disconnect observer"),"\n"),r.createElement(t.span,{className:"code-line"},"    ",r.createElement(t.span,{className:"token keyword control-flow"},"return")," ",r.createElement(t.span,{className:"token boolean"},"true"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"),r.createElement(t.span,{className:"code-line"},"  ",r.createElement(t.span,{className:"token punctuation"},"}"),"\n"),r.createElement(t.span,{className:"code-line"},r.createElement(t.span,{className:"token punctuation"},"}"),r.createElement(t.span,{className:"token punctuation"},")"),r.createElement(t.span,{className:"token punctuation"},";"),"\n"))))}var s=function(e={}){const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?r.createElement(t,e,r.createElement(c,e)):c(e)},o=n(2349),m=n(301),i=n(9144);function u({location:e,data:t,children:n}){const{mdx:a}=t,l=(0,r.useRef)(),{pathname:c}=e,s="/"===c;return r.createElement(m.A,{location:e,sidebar:a.frontmatter.sidebar},r.createElement("main",{className:"flex-1 has-toc"},!s&&r.createElement("section",{className:"mb-10 pt-1"},r.createElement("h1",null,a.frontmatter.title)),r.createElement("section",{className:"items-start with-toc"},!s&&r.createElement(o.A,{data:a.tableOfContents,articleRef:l}),r.createElement("article",{className:"flex-1 min-w-0 mr-4",ref:l},n)),r.createElement("section",null,r.createElement("hr"),a.fields.slug.startsWith("posts/")&&r.createElement("div",{className:"mb-6"},r.createElement("em",null,"Published at ",a.frontmatter.date)))))}function p(e){return r.createElement(u,e,r.createElement(s,e))}},8931:function(e,t,n){n.d(t,{A:function(){return l}});let a=!1;try{const e=Object.defineProperty({},"passive",{get(){a=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(c){}const r=!!a&&{passive:!0};function l(e){return window.addEventListener("scroll",e,r),()=>window.removeEventListener("scroll",e,r)}},4293:function(e,t,n){n.d(t,{w:function(){return r}});var a=n(9474);function r({children:e}){return a.createElement("div",{className:"info-box"},e)}},9144:function(e,t,n){n.d(t,{p:function(){return c}});var a=n(9474),r=n(8136),l=n(1713);function c(){const{site:{siteMetadata:{title:e,subtitle:t}}}=(0,r.useStaticQuery)("3202921338");return a.createElement(a.Fragment,null,a.createElement("title",null,e),a.createElement("meta",{name:"description",content:t}),a.createElement("meta",{name:"google-site-verification",content:"OKMYmcVuMfm9H_UjfNXPzRb2c0QoBtmZ7v1KwHNXnRQ"}),a.createElement("link",{rel:"shortcut icon",type:"image/png",href:l.A}))}},301:function(e,t,n){n.d(t,{A:function(){return b}});var a=n(8595),r=n(9474),l=(n(3763),n(993),n(1622),n(5376),n(8136));const c=(s=function(e){const{allMdx:{nodes:t}}=(0,l.useStaticQuery)("1116475411"),n=(0,r.useMemo)((()=>(null==e?void 0:e.match)&&(null==t?void 0:t.filter((t=>{var n;return(null===(n=t.frontmatter.sidebar)||void 0===n?void 0:n.match)===e.match})).sort(((e,t)=>e.frontmatter.sidebar.order-t.frontmatter.sidebar.order)))),[e,t]),[a,c]=(0,r.useState)(!1);return{matchedNodes:n,show:a,setShow:c,toggle:()=>{c(!a)}}},o=r.createContext(null),{Provider:function(e){var t=s(e.initialState);return r.createElement(o.Provider,{value:t},e.children)},useContainer:function(){var e=r.useContext(o);if(null===e)throw new Error("Component must be wrapped with <Container.Provider>");return e}});var s,o,m=n(4432),i=(n(6851),n(2445),n(8931));function u(){const e=(0,r.useRef)();return(0,r.useEffect)((()=>(0,i.A)((()=>{const t=document.documentElement,n=(document.body.scrollTop||t.scrollTop)/(t.scrollHeight-t.clientHeight),a=Math.min(1,n);e.current.style.transform=`scaleX(${a})`})))),r.createElement("div",{className:"w-full h-px"},r.createElement("div",{className:"w-full h-full origin-left bg-yellow-500 scale-x-0",ref:e}))}function p(){const[e,t]=(0,r.useState)(null);return e?r.createElement("div",{className:"bg-orange-200 px-4 text-sm flex","data-ga-category":"banner"},r.createElement("div",{className:"flex-1",dangerouslySetInnerHTML:{__html:e}}),r.createElement("div",{onClick:()=>{t(null)},className:"cursor-pointer text-gray-600","data-ga-label":"hide"},"âœ—")):null}function d(e){const{matchedNodes:t,toggle:n}=c.useContainer(),{data:a}=e,s=a.allMdx.nodes.reduce(((e,t)=>(t.frontmatter.redirect_from.forEach((n=>{e[n]=`/${t.fields.slug}`})),e)),{});return r.createElement("header",{className:"sticky top-0 left-0 right-0 bg-white z-10"},r.createElement("nav",null,r.createElement(l.Link,{to:"/",className:"nav-icon sm:hidden"},r.createElement("svg",{viewBox:"0 0 24 24"},r.createElement("path",{d:"M12 0l-12 12h4v12h5v-8h6v8h5v-12h4z"}))),t&&r.createElement("a",{className:"nav-icon lg:hidden",onClick:e=>{e.stopPropagation(),n()}},r.createElement("svg",{viewBox:"0 0 24 24"},r.createElement("path",{d:"M0 2h24v4h-24zM0 10h24v4h-24zM0 18h24v4h-24z"}))),r.createElement(l.Link,{to:"/",className:"brand hidden sm:block"},"Violentmonkey"),r.createElement("span",{className:"flex-1"}),r.createElement("div",{className:"overflow-auto min-w-0 flex whitespace-no-wrap"},a.site.siteMetadata.menu.map((e=>r.createElement(l.Link,{className:"nav-item",key:e.path,to:s[e.path]||e.path,activeClassName:"active",partiallyActive:!0},e.label))))),r.createElement(u,null))}var E=e=>r.createElement(l.StaticQuery,{query:"1700780748",render:t=>r.createElement(r.Fragment,null,r.createElement(p,null),r.createElement(d,(0,m.A)({},e,{data:t})))});function h(e){const{data:{site:{siteMetadata:{copyright:t,footer:n}}}}=e;return r.createElement("footer",{className:"flex mt-10 p-6 pb-16 border-t border-gray-400 lg:pb-6"},r.createElement("div",null,"Violentmonkey ",t),n.map((e=>r.createElement(l.Link,{className:"mx-2",key:e.path,to:e.path},e.label))))}var f=e=>r.createElement(l.StaticQuery,{query:"2344890832",render:t=>r.createElement(h,(0,m.A)({},e,{data:t}))});function N(){const{matchedNodes:e,setShow:t}=c.useContainer();return(0,r.useEffect)((()=>{if(e){const e=()=>{t(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}}),[e,t]),e?r.createElement("aside",{className:"sidebar"},r.createElement("ul",null,e.map(((e,t)=>r.createElement("li",{key:t},r.createElement(l.Link,{to:`/${e.fields.slug}`,activeClassName:"active"},e.frontmatter.title)))))):null}function k(){const[e,t]=(0,r.useState)(!1);return e?r.createElement("div",{className:"fixed bottom-0 right-0 w-full h-full flex flex-col items-end z-10 max-w-[320px] max-h-[450px]"},r.createElement("div",{className:"p-2 cursor-pointer",onClick:()=>t(!1)},r.createElement("svg",{viewBox:"0 0 12 12",className:"w-4 h-4"},r.createElement("path",{d:"M0 1L11 12L12 11L1 0zM11 0L0 11L1 12L12 1z",stroke:"none",fill:"currentColor"}))),r.createElement("iframe",{className:"flex-1 w-full",src:"https://discord.com/widget?id=995346102003965952&theme=dark",sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"})):r.createElement("a",{className:"fixed bottom-0 right-8 px-8 py-2 bg-blue-500 hover:bg-blue-600 text-white hover:text-white rounded-t-lg uppercase cursor-pointer",onClick:()=>t(!0)},"Open Chat")}const v=["sidebar"];function g(e){const{location:{pathname:t},children:n}=e,{show:a}=c.useContainer();return"/offline-plugin-app-shell-fallback/"===t?null:r.createElement(r.Fragment,null,r.createElement(E,null),r.createElement("div",{className:"relative flex z-0 "+(a?"sidebar-open":"")},r.createElement(N,null),n),r.createElement(f,null),r.createElement(k,null))}var b=e=>{let{sidebar:t}=e,n=(0,a.A)(e,v);return r.createElement(c.Provider,{initialState:t},r.createElement(g,n))}},2349:function(e,t,n){n.d(t,{A:function(){return s}});n(116),n(2445);var a=n(9474),r=n(8136),l=n(8931);function c({items:e}){return a.createElement("ul",null,e.map(((e,t)=>{const n=e.url.indexOf("#"),l=n<0?"#":e.url.slice(n);return a.createElement("li",{key:t},a.createElement(r.Link,{to:l},e.title),e.items&&a.createElement(c,{items:e.items}))})))}function s(e){const{className:t,data:n,articleRef:r}=e,s=(0,a.useRef)(),o=(0,a.useRef)();return(0,a.useEffect)((()=>{if(!n)return;const e=Array.from(s.current.querySelectorAll("a"));e.forEach((e=>{const t=decodeURIComponent(e.href.split("#")[1]||"");if(e.dataset.id=t,r.current){const n=r.current.querySelector(`#${CSS.escape(t)}`);n&&(e.textContent=n.textContent.trim())}}));return(0,l.A)((()=>{if(!r.current||!s.current)return;const{scrollTop:t}=document.body,n=e.map((e=>{const{id:n}=e.dataset,a=r.current.querySelector(`#${CSS.escape(n)}`);return a&&{id:n,a:e,offset:a.getBoundingClientRect().top-t-70}})).filter(Boolean),{a:a}=n.find(((e,t)=>{const a=n[t+1];return a&&a.offset>0}))||{};o.current&&(o.current.className=""),a&&(a.className="active"),o.current=a}))})),a.createElement("section",{className:`toc ${t||""}`,ref:s},(null==n?void 0:n.items)&&a.createElement(a.Fragment,null,a.createElement("h2",null,"Table of Contents"),a.createElement(c,{items:n.items})))}},1713:function(e,t,n){t.A=n.p+"static/vm-6437e4e5a400c6eff1c23ead4d549b0a.png"}}]);
//# sourceMappingURL=component---src-templates-post-index-js-content-file-path-content-guide-observing-dom-index-md-540390cb26964b66dd2c.js.map